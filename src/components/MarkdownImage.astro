---
import { Image } from "astro:assets";

interface Props {
  src: string;
  alt: string;
  title?: string;
  width?: string;
  height?: string;
}

const { src, alt, title } = Astro.props;

// Helper to determine if remote
const isRemote = src.startsWith("http");
---

<figure class="my-8">
  {
    isRemote ? (
      <Image
        src={src}
        alt={alt}
        width={800}
        height={450}
        format="webp"
        class="rounded-xl w-full h-auto object-cover border border-white/10 shadow-lg"
        inferSize={true}
      />
    ) : (
      <img
        src={src}
        alt={alt}
        class="rounded-xl w-full h-auto object-cover border border-white/10 shadow-lg"
        loading="lazy"
        decoding="async"
      />
    )
  }
  {
    title && (
      <figcaption class="text-center text-sm text-gray-500 mt-2">
        {title}
      </figcaption>
    )
  }
</figure>
